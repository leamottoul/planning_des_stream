
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendrier Magique des Streams</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-color, #f3f0ff);
      color: var(--text-color, #000);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      min-height: 100vh;
      transition: background 0.5s, color 0.5s;
    }

    .container {
      background: white;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      max-width: 800px;
      width: 100%;
    }

    h1 {
      font-size: 1.5em;
      color: #6c4db4;
      margin-bottom: 10px;
      text-align: center;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }

    .calendar-header button {
      padding: 5px 12px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      background-color: #6c4db4;
      color: white;
      cursor: pointer;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }

    .day {
      background: #f3f3f3;
      border-radius: 10px;
      padding: 8px;
      min-height: 80px;
      font-size: 0.9em;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      cursor: pointer;
      transition: 0.3s;
      overflow: hidden;
      position: relative;
    }

    .day:hover {
      background: #e0d4ff;
    }

    .today {
      border: 2px solid #ffd54f;
      box-shadow: 0 0 10px #ffecb3;
    }

    .day.empty {
      background: transparent;
      cursor: default;
      box-shadow: none;
    }

    .stream-title {
      font-size: 0.8em;
      margin-top: 5px;
      text-align: center;
    }

    .tag-Minecraft { background: #81c784; }
    .tag-GTA { background: #64b5f6; }
    .tag-Chat { background: #f48fb1; }
    .tag-Test { background: #ffb74d; }
    .tag-Off { background: #e0e0e0; }

    .tag {
      color: white;
      padding: 2px 6px;
      border-radius: 6px;
      margin-top: 5px;
      font-size: 0.75em;
      text-align: center;
    }

    #theme-toggle {
      margin-left: 10px;
      background: #444;
    }

    @media (max-width: 600px) {
      .calendar {
        grid-template-columns: repeat(4, 1fr);
      }
    }
  </style>
</head>
<body>

<div class="container">
  <h1 id="month-year">‚ú® Calendrier Magique des Streams</h1>
  <div class="calendar-header">
    <button onclick="changeMonth(-1)">‚¨ÖÔ∏è Mois pr√©c√©dent</button>
    <button id="edit-btn">üîí Modifier le planning</button>
    <button onclick="changeMonth(1)">Mois suivant ‚û°Ô∏è</button>
    <button id="theme-toggle">üåô Th√®me</button>
  </div>
  <div class="calendar" id="calendar-days"></div>
</div>

<script>
  let currentDate = new Date();
  let editMode = false;
  let isDark = false;
  const password = "rP5SQnuZ%QE"; // change ce mot de passe

  const monthYear = document.getElementById('month-year');
  const calendarDays = document.getElementById('calendar-days');
  const editBtn = document.getElementById('edit-btn');
  const themeToggle = document.getElementById('theme-toggle');

  const months = ["Janvier", "F√©vrier", "Mars", "Avril", "Mai", "Juin", "Juillet",
    "Ao√ªt", "Septembre", "Octobre", "Novembre", "D√©cembre"];

  function loadData(key) {
    return JSON.parse(localStorage.getItem(key) || "{}");
  }

  function saveData(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
  }

  function getKey(year, month) {
    return `streams-${year}-${month + 1}`;
  }

  function createCalendar(date) {
    const year = date.getFullYear();
    const month = date.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();
    const data = loadData(getKey(year, month));

    calendarDays.innerHTML = "";
    monthYear.textContent = `‚ú® Calendrier Magique des Streams ‚Äì ${months[month]} ${year}`;

    for (let i = 1; i < (firstDay === 0 ? 7 : firstDay); i++) {
      const div = document.createElement("div");
      div.className = "day empty";
      calendarDays.appendChild(div);
    }

    for (let day = 1; day <= daysInMonth; day++) {
      const div = document.createElement("div");
      div.className = "day";
      const key = day;

      if (
        day === today.getDate() &&
        month === today.getMonth() &&
        year === today.getFullYear()
      ) {
        div.classList.add("today");
      }

      const num = document.createElement("div");
      num.textContent = day;
      div.appendChild(num);

      const stream = data[key];
      if (stream) {
        const title = document.createElement("div");
        title.className = "stream-title";
        title.textContent = stream.name;
        div.appendChild(title);

        const tag = document.createElement("div");
        tag.className = `tag tag-${stream.type}`;
        tag.textContent = stream.type;
        div.appendChild(tag);
      }

      div.addEventListener("click", () => {
        if (!editMode) return;
        const name = prompt("Titre du stream :");
        if (name === null) return;
        const type = prompt("Type (Minecraft, GTA, Chat, Test, Off) :");
        if (type === null) return;

        data[key] = { name, type };
        saveData(getKey(year, month), data);
        createCalendar(currentDate);
      });

      calendarDays.appendChild(div);
    }
  }

  function changeMonth(delta) {
    currentDate.setMonth(currentDate.getMonth() + delta);
    createCalendar(currentDate);
  }

  editBtn.addEventListener("click", () => {
    const userPass = prompt("Mot de passe ?");
    if (userPass === password) {
      editMode = !editMode;
      editBtn.textContent = editMode ? "‚úÖ Fin de l'√©dition" : "üîí Modifier le planning";
    } else {
      alert("Mot de passe incorrect !");
    }
  });

  themeToggle.addEventListener("click", () => {
    isDark = !isDark;
    document.documentElement.style.setProperty("--bg-color", isDark ? "#222" : "#f3f0ff");
    document.documentElement.style.setProperty("--text-color", isDark ? "#fff" : "#000");
    themeToggle.textContent = isDark ? "‚òÄÔ∏è Th√®me" : "üåô Th√®me";
  });

  createCalendar(currentDate);
</script>

</body>
</html>
